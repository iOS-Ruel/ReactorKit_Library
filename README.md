# ReactorKit_Library


ReactorKit ê³µì‹ë¬¸ì„œ : https://github.com/ReactorKit/ReactorKit

# RactorKitğŸ¤”?

ì±„ìš©ê³µê³ ë¥¼ ë³´ë‹¤ë³´ë©´ ReactorKitì— ëŒ€í•œ ì¡°ê±´ì´ ë§ì€ ê²ƒì„ ë³´ê²Œ ë˜ì—ˆë‹¤.

ìµœê·¼ ì•„í‚¤í…ì³ì— ê´€ì‹¬ì„ ê°–ê³  ìˆì—ˆê¸° ë•Œë¬¸ì— ReactorKitì— ëŒ€í•˜ì—¬ í•œë²ˆ ì•Œì•„ë³´ê³ ì í•œë‹¤!

---

## ReactorKitì´ë€?

ê³µì‹ ë¬¸ì„œì— ë”°ë¥´ë©´

<aside>
ğŸ’¡

ReactorKitì€ ë°˜ì‘í˜•ì´ê³  ë‹¨ë°©í–¥ì ì¸ íë¦„ì„ ì§€í–¥í•˜ëŠ” ì•„í‚¤í…ì³ë¥¼ ìœ„í•œ í”„ë ˆì„ì›Œí¬ì´ë‹¤.

</aside>

ë¼ê³  ì„¤ëª…ì„ í•˜ê³  ìˆë‹¤

ë˜í•œ, ReactorKitì€ Fluxì™€ ë°˜ì‘í˜• í”„ë¡œê·¸ë˜ë°ì„ ê²°í•©í•œ í”„ë ˆì„ì›Œí¬ì´ê³ , ì‚¬ìš©ì ë™ì‘ê³¼ ë·° ìƒíƒœëŠ” ê°ê°ì˜ ë ˆì´ì–´ë¡œ Observable ìŠ¤íŠ¸ë¦¼ì„ í†µí•´ ì „ë‹¬ëœë‹¤.

ì´ëŸ¬í•œ ìŠ¤íŠ¸ë¦¼ì€ ë‹¨ë°©í–¥ìœ¼ë¡œ íë¥´ë©°, ViewëŠ” ì˜¤ì§ Actionë§Œ ë°©ì¶œí•  ìˆ˜ ìˆê³ , ReactorëŠ” ì˜¤ì§ Stateë§Œ ë°©ì¶œí•  ìˆ˜ ìˆë‹¤. â€˜

ë¼ê³  ì„¤ëª…ì„ í•œë‹¤.

ì—¬ê¸°ì„œ ë§ˆì§€ë§‰ì—ì„œ ë§í•˜ëŠ” 

**ë‹¨ë°©í–¥ìœ¼ë¡œ íë¥´ë©° ViewëŠ” Actionì„ ë°©ì¶œí•˜ê³  ReactorëŠ” Stateë¥¼ ë°©ì¶œí•œë‹¤.**  

ê°€ ê°€ì¥ í•µì‹¬ì´ ë˜ëŠ” ë§ ê°™ìœ¼ë‹ˆ ê¸°ì–µí•´ë‘ë¡ í•˜ì

[CounterApp](https://www.notion.so/CounterApp-12e00e718f9d80608ea4f1924946c8a4?pvs=21)

ì•ì„œ ë‚˜ì˜¨ ë§ê³¼ ê°™ì´ ê·¸ë¦¼ì„ ë³´ë©´ ë‹¨ë°©í–¥ìœ¼ë¡œ íë¦„ì„ ê°€ì ¸ê°€ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

### **ReactorKitì˜ íŠ¹ì§•?**

- ê¸°ì¡´ MVVM ì•„í‚¤í…ì³ íŒ¨í„´ì—ëŠ” íŠ¹ì • ì •í˜•í™”ëœ í…œí”Œë¦¿ì´ ì—†ì–´ ê°œë°œìë“¤ë§ˆë‹¤ ì´í•´í•˜ëŠ” ì‚¬í•­ì´ ë‹¤ë¥¸ ë¶ˆí¸í•¨ì´ ì¡´ì¬í•˜ì˜€ëŠ”ë°Â **ReactorKitì€ ê·œì¹™ì„ ë‘ì–´ MVVMì˜ í˜•íƒœë¥¼ ì •í˜•í™”í•˜ê²Œ í…œí”Œë¦¿í™”**í•´ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆìŒ

- Rxì™€ MVVMì„ ì‚¬ìš©í•˜ë©´ì„œ ë‹¤ì–‘í•œ Observable ë³€ìˆ˜ê°€ ìƒê¸¸ë•Œ ë³€ìˆ˜ì˜ ìƒíƒœì™€ ì•¡ì…˜ì˜ ì˜ë„ ë° êµ¬ë¶„ì´ ì–´ë ¤ìš´ì ì„ ReactorKitì´ í•´ê²°

-Â **ë¹„ì§€ë‹ˆìŠ¤ ë¡œì§ì„ ë¶„ë¦¬**í•¨ìœ¼ë¡œ í…ŒìŠ¤íŠ¸ì— ìš©ì´ (ë·°ì—ëŠ” ë¹„ì§€ë‹ˆìŠ¤ ë¡œì§ì´ ì—†ìŒ)

- ë¶€ë¶„ì ì¸ ì•„í‚¤í…ì³ë¥¼ ë”°ë¼ë„ë¨ (ì „ì²´ê°€ ë‹¤ í•´ë‹¹ ì•„í‚¤í…ì³ íŒ¨í„´ì„ ë”°ë¥´ì§€ ì•Šì•„ë„ë¨)

- ê°„ê²°í•œ ì½”ë“œë¥¼ í†µí•´ ë‹¨ìˆœí•˜ê²Œ êµ¬í˜„í•˜ê³  í™•ì¥ì´ ê°€ëŠ¥

ì¶œì²˜: https://green1229.tistory.com/142

### ReactorKitì˜ êµ¬ì„±ìš”ì†Œ

1. **View**
- ViewëŠ” ì‚¬ìš©ìì˜ ì…ë ¥ì„ ë°›ì•„ Actionì— ì „ë‹¬
- Stateë¥¼ ë°›ì•„ ViewëŠ” í™”ë©´ ë°”ì¸ë”©
- View í”„ë¡œí† ì½œì„ ë”°ë¥´ë©° Reactorë¥¼ ì£¼ì…í•˜ì—¬ ì‚¬ìš©
- **Viewì—ëŠ” ë¹„ì§€ë‹ˆìŠ¤ ë¡œì§ì´ ì—†ìŒ!**

```swift
class ProfileViewController: UIViewController, View {
  var disposeBag = DisposeBag()
}

profileViewController.reactor = UserViewReactor() // Reactor ì£¼ì…
```

```swift
func bind(reactor: ProfileViewReactor) {
  // action (View -> Reactor)
  refreshButton.rx.tap.map { Reactor.Action.refresh }
    .bind(to: reactor.action)
    .disposed(by: self.disposeBag)

  // state (Reactor -> View)
  reactor.state.map { $0.isFollowing }
    .bind(to: followButton.rx.isSelected)
    .disposed(by: self.disposeBag)
}
```

ìŠ¤í† ë¦¬ë³´ë“œë„ ì§€ì›í•œë‹¤

```swift
let viewController = MyViewController()
viewController.reactor = MyViewReactor() // `bind(reactor:)` ëŠ” ì¦‰ì‹œ ì‹¤í–‰ë˜ì§€ ì•ŠëŠ”ë‹¤.

class MyViewController: UIViewController, StoryboardView {
  func bind(reactor: MyViewReactor) {
    // ë·°ê°€ ë¡œë“œëœ ì´í›„ (viewDidLoad) í˜¸ì¶œ ë˜ì–´ ì‹¤í–‰ëœë‹¤.
  }
}
```

1. **Reactor**
- Viewì˜ ìƒíƒœë¥¼ ê´€ë¦¬í•¨
- í° ì—­í• ì€ Viewì—ì„œ ë¹„ì§€ë‹ˆìŠ¤ë¡œì§ì„ ë¶„ë¦¬í•˜ëŠ” ê²ƒ
- ReactorëŠ” Viewì— ì¢…ì†ë˜ì§€ ì•Šê¸° ë•Œë¬¸ì— í…ŒìŠ¤íŠ¸ê°€ ìš©ì´í•¨
- ëª¨ë“  Viewì—ëŠ” Reactorê°€ ì¡´ì¬í•¨ ì¦‰ 1:1 ì„
- ReactorëŠ” Reactor í”„ë¡œí† ì½œì„ ì¤€ìˆ˜í•˜ê¸° ë•Œë¬¸ì— Action, Mutation, Stateë¥¼ ì •ì˜ í•´ì£¼ì–´ì•¼í•¨
- initialStateë¼ëŠ” ì†ì„±ë„ í•„ìš”

```swift
class ProfileViewReactor: Reactor {
  // represent user actions
  enum Action {
    case refreshFollowingStatus(Int)
    case follow(Int)
  }

  // represent state changes
  enum Mutation {
    case setFollowing(Bool)
  }

  // represents the current view state
  struct State {
    var isFollowing: Bool = false
  }

  let initialState: State = State()
}
```

![image](https://github.com/user-attachments/assets/4601399e-061c-427d-a472-b662c68db1bf)

- Action: ì‚¬ìš©ìì™€ì˜ ìƒí˜¸ì‘ìš©
- State: Viewì˜ ìƒíƒœ
- Mutation: Actionê³¼ Stateì˜ ì—°ê²°ë‹¤ë¦¬ë¡œ **muate(), reduce() ë©”ì„œë“œë¥¼ í™œìš©í•˜ì—¬ Actionê³¼ StateìŠ¤íŠ¸ë¦¼ìœ¼ë¡œ ë³€í™˜**ì‹œí‚´

1. mutate()
- mutate()ëŠ” Actionì„ ë°›ì•„ Observable<Mutation>ì„ ìƒì„±

```swift
func mutate(action: Action) -> Observable<Mutation>
```

- ëª¨ë“  ë¹„ë™ê¸° ì‘ì—…ì´ë‚˜ API í˜¸ì¶œê³¼ ê°™ì€ ë¶€ìˆ˜ íš¨ê³¼(side effect)ëŠ” mutate()ë©”ì„œë“œì—ì„œ ìˆ˜í–‰ë¨

```swift
func mutate(action: Action) -> Observable<Mutation> {
  switch action {
  case let .refreshFollowingStatus(userID): // receive an action
    return UserAPI.isFollowing(userID) // create an API stream
      .map { (isFollowing: Bool) -> Mutation in
        return Mutation.setFollowing(isFollowing) // convert to Mutation stream
      }

  case let .follow(userID):
    return UserAPI.follow()
      .map { _ -> Mutation in
        return Mutation.setFollowing(true)
      }
  }
}
```

1. reduce()
- reduce()ë©”ì„œë“œëŠ” ì´ì „ ìƒíƒœì™€ Mutationì„ ì‚¬ìš©í•˜ì—¬ **ìƒˆë¡œìš´ stateë¥¼ ìƒì„±**í•¨.

```swift
func reduce(state: State, mutation: Mutation) -> State
```

- ì´ ë©”ì„œë“œëŠ” ìˆœìˆ˜ í•¨ìˆ˜ë¡œ, ìƒˆë¡œìš´ steteë¥¼ ë™ê¸°ì ìœ¼ë¡œ ë°˜í™˜í•´ì•¼í•¨. ì´ í•¨ìˆ˜ì—ì„œëŠ” ë¶€ìˆ˜íš¨ê³¼(side effect)ë¥¼ ë°œìƒì‹œí‚¤ë©´ ì•ˆë¨
1. transform()
- transform()ì€ ê°ê°ì˜ ìŠ¤íŠ¸ë¦¼ì„ ë³€í™˜(ì„¸ê°€ì§€ í•¨ìˆ˜ê°€ ìˆìŒ)

```swift
func transform(action: Observable<Action>) -> Observable<Action>
func transform(mutation: Observable<Mutation>) -> Observable<Mutation>
func transform(state: Observable<State>) -> Observable<State>
```

---





